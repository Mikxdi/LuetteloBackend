(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{14:function(e,n,t){e.exports=t(37)},19:function(e,n,t){},37:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),l=t(13),u=t.n(l),c=(t(19),t(2)),o=t(3),i=t.n(o),m="/api/persons",d=function(){return i.a.get(m).then((function(e){return e.data}))},s=function(e){return i.a.post(m,e).then((function(e){return e.data}))},f=function(e){return i.a.delete("".concat(m,"/").concat(e))},h=function(e){return i.a.put("".concat(m,"/").concat(e.id),e).then((function(e){return e.data}))},b=function(e){return r.a.createElement("form",{onSubmit:e.addPerson},r.a.createElement("h3",null,"Add person"),r.a.createElement("div",null,"name: ",r.a.createElement("input",{value:e.newName,onChange:e.handleNameChange})),r.a.createElement("div",null,"number: ",r.a.createElement("input",{value:e.newNumber,onChange:e.handleNumberChange})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add")))},E=function(e){var n=e.person,t=e.handleDelete;return console.log(n),r.a.createElement("tr",null,r.a.createElement("td",null,n.name),r.a.createElement("td",null,n.number),r.a.createElement("td",null,r.a.createElement("button",{onClick:function(){return t(n.id)}},"delete")))},g=function(e){var n=e.persons.filter((function(n){return n.name.toLowerCase().includes(e.filter.toLowerCase())}));return r.a.createElement("table",null,r.a.createElement("tbody",null,n.map((function(n){return r.a.createElement(E,{key:n.id,person:n,handleDelete:e.handleDelete})}))))},p=function(e){return r.a.createElement("div",null,"Search for people",r.a.createElement("input",{value:e.filter,onChange:e.onChange}))},v=function(e){var n=e.message;return null===n?null:r.a.createElement("div",{style:{color:"green",background:"grey",width:"80%",fontSize:25,borderStyle:"solid",padding:20}},n)},w=function(e){var n=e.message;return null===n?null:r.a.createElement("div",{style:{color:"red",background:"grey",width:"80%",fontSize:25,borderStyle:"solid",padding:20}},n)},y=function(){var e=Object(a.useState)([]),n=Object(c.a)(e,2),t=n[0],l=n[1],u=Object(a.useState)(""),o=Object(c.a)(u,2),i=o[0],m=o[1],E=Object(a.useState)(""),y=Object(c.a)(E,2),j=y[0],C=y[1],O=Object(a.useState)(""),S=Object(c.a)(O,2),N=S[0],k=S[1],D=Object(a.useState)(null),P=Object(c.a)(D,2),A=P[0],z=P[1],J=Object(a.useState)(null),L=Object(c.a)(J,2),T=L[0],x=L[1];Object(a.useEffect)((function(){d().then((function(e){l(e)}))}),[]);return r.a.createElement("div",null,r.a.createElement(v,{message:T}),r.a.createElement(w,{message:A}),r.a.createElement("h2",null,"Phonebook"),r.a.createElement("div",null,r.a.createElement(p,{filter:N,onChange:function(e){var n=e.target.value;k(n)}})),r.a.createElement(b,{addPerson:function(e){e.preventDefault();var n={name:i,number:j};if(t.some((function(e){return e.name===i}))){if(window.confirm("".concat(i," has been already saved, want to change number?"))){var a=t.find((function(e){return e.name===i}));a.number=j,h(a).then((function(e){l(t.map((function(n){return n.name!==a?n:e}))),m(""),C(""),x("".concat(e.name," number is changed"))})).catch((function(e){z("Changing number failed")}))}}else s(n).then((function(e){l(t.concat(e)),m(""),C(""),x("Added ".concat(e.name))})).catch((function(e){console.log(e.response.data),z(e.response.data.error)}));setTimeout((function(){x(null),z(null)}),5e3)},newName:i,handleNameChange:function(e){m(e.target.value)},newNumber:j,handleNumberChange:function(e){C(e.target.value)}}),r.a.createElement("h2",null,"Numbers"),r.a.createElement("ul",null,r.a.createElement(g,{persons:t,filter:N,handleDelete:function(e){window.confirm("Are you sure you want to remove? ")&&(f(e).then((function(){var n=t.filter((function(n){return n.id!==e}));l(n),x("Person deleted succesfully")})).catch((function(e){z("Deleting person failed")})),setTimeout((function(){x(null),z(null)}),5e3))}})))};u.a.render(r.a.createElement(y,null),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.00c78441.chunk.js.map